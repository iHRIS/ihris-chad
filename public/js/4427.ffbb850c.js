"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[4427],{3205:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(8085),i=r(3325),a=(0,i.Z)(s.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},8472:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.overlay=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-overlay",{attrs:{value:e.overlayUnclosed}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),r("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[r("v-list",{staticClass:"white--text"},[r("v-list-item",[r("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(t){return e.$router.push("/resource/view/practitioner/"+e.practitionerId)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-eye")]),r("span",[e._v("View Health Profession")])],1)],1),e.canAddSupervisorApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push("/questionnaire/supervisor-leave-approval/supervisor-leave-approval?practitioner="+e.practitionerId+"&leaverequest="+e.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddSupervisorSupervisorApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push("/questionnaire/supervisor-supervisor-leave-approval/supervisor-supervisor-leave-approval?practitioner="+e.practitionerId+"&leaverequest="+e.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddHRApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push("/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+e.practitionerId+"&leaverequest="+e.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e()],1)],1),r("v-row",[r("v-col",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.leaveDetailsHeaders,items:e.leaveDetails,"items-per-page":10}}),r("br"),e.leaveRequest.category?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Leave Request ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Leave Category")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.category)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Start Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.startDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("End Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.endDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Return Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.returnDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Days")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.days)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.status)+" ")])],1)],1)],1):e._e(),e.supervisorApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Immediate Supervisor Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorApproval.description)+" ")])],1)],1)],1):e._e(),e.supervisorSupervisorApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Supervisor's Supervisor Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorSupervisorApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorSupervisorApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.supervisorSupervisorApproval.description)+" ")])],1)],1)],1):e._e(),e.hrApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" HR Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.hrApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.hrApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.hrApproval.description)+" ")])],1)],1)],1):e._e()],1),r("v-col",{attrs:{cols:"3"}},[r("br"),r("leave-request-stepper",{attrs:{step:e.step,noSupervisorAppr:!e.supervisorApproval.id,noSupervisorSupervisorAppr:!e.supervisorSupervisorApproval.id,noHRApproval:!e.hrApproval.id,status:e.leaveRequest.status}})],1)],1)],1)},i=[];const a=r(7673);var o={props:["queries"],data(){return{overlay:!1,overlayUnclosed:!1,loading:!1,practitionerId:"",leaveRequest:{startDate:"",category:""},supervisorApproval:{id:""},supervisorSupervisorApproval:{id:""},hrApproval:{id:""},noSupervisor:!1,noSupervisorSupervisor:!1,supervisor:"",supervisorSupervisor:"",step:1,leaveDetails:[],leaveDetailsHeaders:[{text:"Period",value:"period"},{text:"Category",value:"category"},{text:"Leave Days",value:"maxDays"},{text:"Accrued",value:"accrued"},{text:"Days on Leave",value:"daysOnLeave"},{text:"Expired",value:"expired"},{text:"Balance",value:"balance"}]}},computed:{canAddSupervisorApproval(){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));return!(!e||e.valueReference.reference!==this.supervisor||this.supervisorApproval.id)},canAddSupervisorSupervisorApproval(){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));return!(!e||e.valueReference.reference!==this.supervisorSupervisor||this.supervisorSupervisorApproval.id)},canAddHRApproval(){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/na-hr-manager"!==e.valueReference.reference||this.hrApproval.id)}},methods:{getLeaveDetails(){fetch("/site/leave/balance/"+this.practitionerId).then((e=>e.json().then((e=>{this.leaveDetails=e,console.error(JSON.stringify(e,0,2))}))))},getSupervisor(){let e,t={practitioner:this.practitionerId,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(t)).then((t=>t.json().then((async t=>{if(t&&t.entry&&t.entry.length)for(let s of t.entry)e?e.resource.id<s.resource.id&&(e=s):e=s;let r=e.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor"===e.url));r?(this.supervisor=r.valueReference.reference,this.getSupervisorSupervisor(this.supervisor)):this.noSupervisor=!0}))))},getSupervisorSupervisor(e){let t,r={practitioner:e,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(r)).then((e=>e.json().then((async e=>{if(e&&e.entry&&e.entry.length)for(let s of e.entry)t?t.resource.id<s.resource.id&&(t=s):t=s;let r=t.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor"===e.url));r?this.supervisorSupervisor=r.valueReference.reference:this.noSupervisorSupervisor=!0}))))},getLeave(){fetch("/fhir/Basic/"+this.queries.id).then((e=>e.json().then((async e=>{this.practitionerId=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url)).valueReference.reference,this.practitionerId=this.practitionerId.split("/")[1],this.leaveRequest.startDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/start-date"===e.url)).valueDate,this.leaveRequest.endDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/end-date"===e.url)).valueDate,this.leaveRequest.returnDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/return-date"===e.url)).valueDate,this.leaveRequest.days=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-days"===e.url))?.valueInteger,this.leaveRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-status"===e.url)).valueCoding.display,"Approved"===this.leaveRequest.status&&(this.step=4);let t=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-category"===e.url)).valueReference.reference;await fetch("/fhir/"+t).then((e=>e.json().then((async e=>{this.leaveRequest.category=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-basic-name"===e.url)).valueString})))),this.getLeaveDetails(),this.getSupervisor(),this.getSupervisorApproval()}))))},getSupervisorApproval(){let e={_profile:"http://ihris.org/fhir/StructureDefinition/supervisor-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((e=>{e.entry&&e.entry.length&&(4!=this.step&&(this.step=2),this.supervisorApproval.id=e.entry[0].resource.id,this.supervisorApproval.status=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor-leave-status"===e.url)).valueCoding.display,this.supervisorApproval.date=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate,this.supervisorApproval.description=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url)).valueString,this.getSupervisorSupervisorApproval())}))))},getSupervisorSupervisorApproval(){let e={_profile:"http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((e=>{e.entry&&e.entry.length&&(4!=this.step&&(this.step=3),this.supervisorSupervisorApproval.id=e.entry[0].resource.id,this.supervisorSupervisorApproval.status=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-status"===e.url)).valueCoding.display,this.supervisorSupervisorApproval.date=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate,this.supervisorSupervisorApproval.description=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url)).valueString,this.getHRApproval())}))))},getHRApproval(){let e={_profile:"http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((e=>{e.entry&&e.entry.length&&(this.hrApproval.id=e.entry[0].resource.id,this.hrApproval.status=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===e.url)).valueCoding.display,this.hrApproval.date=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate,this.hrApproval.description=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url)).valueString)}))))}},created(){this.getLeave()},components:{"leave-request-stepper":()=>r.e(737).then(r.bind(r,737))}},n=o,l=r(3736),v=r(3453),p=r.n(v),u=r(3150),c=r(2371),h=r(7118),d=r(2102),f=r(4228),g=r(865),y=r(1418),_=r(6428),S=r(6816),A=r(7620),w=r(5132),C=r(1058),D=r(624),x=r(2877),b=(0,l.Z)(n,s,i,!1,null,null,null),m=b.exports;p()(b,{VBtn:u.Z,VCard:c.Z,VCardText:h.ZB,VCardTitle:h.EB,VCol:d.Z,VContainer:f.Z,VDataTable:g.Z,VDivider:y.Z,VIcon:_.Z,VList:S.Z,VListItem:A.Z,VNavigationDrawer:w.Z,VOverlay:C.Z,VProgressCircular:D.Z,VRow:x.Z})}}]);
//# sourceMappingURL=4427.ffbb850c.js.map